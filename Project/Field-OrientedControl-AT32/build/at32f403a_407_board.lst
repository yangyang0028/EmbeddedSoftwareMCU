ARM GAS  /tmp/ccZxRW0B.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"at32f403a_407_board.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.__io_putchar,"ax",%progbits
  16              		.align	1
  17              		.global	__io_putchar
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	__io_putchar:
  24              	.LFB134:
  25              		.file 1 "Core/Src/at32f403a_407_board.c"
   1:Core/Src/at32f403a_407_board.c **** /**
   2:Core/Src/at32f403a_407_board.c ****   **************************************************************************
   3:Core/Src/at32f403a_407_board.c ****   * @file     at32f403a_407_board.c
   4:Core/Src/at32f403a_407_board.c ****   * @version  v2.0.8
   5:Core/Src/at32f403a_407_board.c ****   * @date     2022-04-02
   6:Core/Src/at32f403a_407_board.c ****   * @brief    set of firmware functions to manage leds and push-button.
   7:Core/Src/at32f403a_407_board.c ****   *           initialize delay function.
   8:Core/Src/at32f403a_407_board.c ****   **************************************************************************
   9:Core/Src/at32f403a_407_board.c ****   *                       Copyright notice & Disclaimer
  10:Core/Src/at32f403a_407_board.c ****   *
  11:Core/Src/at32f403a_407_board.c ****   * The software Board Support Package (BSP) that is made available to
  12:Core/Src/at32f403a_407_board.c ****   * download from Artery official website is the copyrighted work of Artery.
  13:Core/Src/at32f403a_407_board.c ****   * Artery authorizes customers to use, copy, and distribute the BSP
  14:Core/Src/at32f403a_407_board.c ****   * software and its related documentation for the purpose of design and
  15:Core/Src/at32f403a_407_board.c ****   * development in conjunction with Artery microcontrollers. Use of the
  16:Core/Src/at32f403a_407_board.c ****   * software is governed by this copyright notice and the following disclaimer.
  17:Core/Src/at32f403a_407_board.c ****   *
  18:Core/Src/at32f403a_407_board.c ****   * THIS SOFTWARE IS PROVIDED ON "AS IS" BASIS WITHOUT WARRANTIES,
  19:Core/Src/at32f403a_407_board.c ****   * GUARANTEES OR REPRESENTATIONS OF ANY KIND. ARTERY EXPRESSLY DISCLAIMS,
  20:Core/Src/at32f403a_407_board.c ****   * TO THE FULLEST EXTENT PERMITTED BY LAW, ALL EXPRESS, IMPLIED OR
  21:Core/Src/at32f403a_407_board.c ****   * STATUTORY OR OTHER WARRANTIES, GUARANTEES OR REPRESENTATIONS,
  22:Core/Src/at32f403a_407_board.c ****   * INCLUDING BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY,
  23:Core/Src/at32f403a_407_board.c ****   * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.
  24:Core/Src/at32f403a_407_board.c ****   *
  25:Core/Src/at32f403a_407_board.c ****   **************************************************************************
  26:Core/Src/at32f403a_407_board.c ****   */
  27:Core/Src/at32f403a_407_board.c **** 
  28:Core/Src/at32f403a_407_board.c **** #include "at32f403a_407_board.h"
  29:Core/Src/at32f403a_407_board.c **** 
  30:Core/Src/at32f403a_407_board.c **** /** @addtogroup AT32F403A_407_board
  31:Core/Src/at32f403a_407_board.c ****   * @{
  32:Core/Src/at32f403a_407_board.c ****   */
  33:Core/Src/at32f403a_407_board.c **** 
ARM GAS  /tmp/ccZxRW0B.s 			page 2


  34:Core/Src/at32f403a_407_board.c **** /** @defgroup BOARD
  35:Core/Src/at32f403a_407_board.c ****   * @brief onboard periph driver
  36:Core/Src/at32f403a_407_board.c ****   * @{
  37:Core/Src/at32f403a_407_board.c ****   */
  38:Core/Src/at32f403a_407_board.c **** 
  39:Core/Src/at32f403a_407_board.c **** /* delay macros */
  40:Core/Src/at32f403a_407_board.c **** #define STEP_DELAY_MS                    50
  41:Core/Src/at32f403a_407_board.c **** 
  42:Core/Src/at32f403a_407_board.c **** /* at-start led resouce array */
  43:Core/Src/at32f403a_407_board.c **** gpio_type *led_gpio_port[LED_NUM]        = {LED2_GPIO, LED3_GPIO, LED4_GPIO};
  44:Core/Src/at32f403a_407_board.c **** uint16_t led_gpio_pin[LED_NUM]           = {LED2_PIN, LED3_PIN, LED4_PIN};
  45:Core/Src/at32f403a_407_board.c **** crm_periph_clock_type led_gpio_crm_clk[LED_NUM] = {LED2_GPIO_CRM_CLK, LED3_GPIO_CRM_CLK, LED4_GPIO_
  46:Core/Src/at32f403a_407_board.c **** 
  47:Core/Src/at32f403a_407_board.c **** /* delay variable */
  48:Core/Src/at32f403a_407_board.c **** static __IO uint32_t fac_us;
  49:Core/Src/at32f403a_407_board.c **** static __IO uint32_t fac_ms;
  50:Core/Src/at32f403a_407_board.c **** 
  51:Core/Src/at32f403a_407_board.c **** /* support printf function, usemicrolib is unnecessary */
  52:Core/Src/at32f403a_407_board.c **** #if (__ARMCC_VERSION > 6000000)
  53:Core/Src/at32f403a_407_board.c ****   __asm (".global __use_no_semihosting\n\t");
  54:Core/Src/at32f403a_407_board.c ****   void _sys_exit(int x)
  55:Core/Src/at32f403a_407_board.c ****   {
  56:Core/Src/at32f403a_407_board.c ****     x = x;
  57:Core/Src/at32f403a_407_board.c ****   }
  58:Core/Src/at32f403a_407_board.c ****   /* __use_no_semihosting was requested, but _ttywrch was */
  59:Core/Src/at32f403a_407_board.c ****   void _ttywrch(int ch)
  60:Core/Src/at32f403a_407_board.c ****   {
  61:Core/Src/at32f403a_407_board.c ****     ch = ch;
  62:Core/Src/at32f403a_407_board.c ****   }
  63:Core/Src/at32f403a_407_board.c ****   FILE __stdout;
  64:Core/Src/at32f403a_407_board.c **** #else
  65:Core/Src/at32f403a_407_board.c ****  #ifdef __CC_ARM
  66:Core/Src/at32f403a_407_board.c ****   #pragma import(__use_no_semihosting)
  67:Core/Src/at32f403a_407_board.c ****   struct __FILE
  68:Core/Src/at32f403a_407_board.c ****   {
  69:Core/Src/at32f403a_407_board.c ****     int handle;
  70:Core/Src/at32f403a_407_board.c ****   };
  71:Core/Src/at32f403a_407_board.c ****   FILE __stdout;
  72:Core/Src/at32f403a_407_board.c ****   void _sys_exit(int x)
  73:Core/Src/at32f403a_407_board.c ****   {
  74:Core/Src/at32f403a_407_board.c ****     x = x;
  75:Core/Src/at32f403a_407_board.c ****   }
  76:Core/Src/at32f403a_407_board.c ****   /* __use_no_semihosting was requested, but _ttywrch was */
  77:Core/Src/at32f403a_407_board.c ****   void _ttywrch(int ch)
  78:Core/Src/at32f403a_407_board.c ****   {
  79:Core/Src/at32f403a_407_board.c ****     ch = ch;
  80:Core/Src/at32f403a_407_board.c ****   }
  81:Core/Src/at32f403a_407_board.c ****  #endif
  82:Core/Src/at32f403a_407_board.c **** #endif
  83:Core/Src/at32f403a_407_board.c **** 
  84:Core/Src/at32f403a_407_board.c **** #if defined (__GNUC__) && !defined (__clang__)
  85:Core/Src/at32f403a_407_board.c ****   #define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
  86:Core/Src/at32f403a_407_board.c **** #else
  87:Core/Src/at32f403a_407_board.c ****   #define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
  88:Core/Src/at32f403a_407_board.c **** #endif
  89:Core/Src/at32f403a_407_board.c **** 
  90:Core/Src/at32f403a_407_board.c **** /**
ARM GAS  /tmp/ccZxRW0B.s 			page 3


  91:Core/Src/at32f403a_407_board.c ****   * @brief  retargets the c library printf function to the usart.
  92:Core/Src/at32f403a_407_board.c ****   * @param  none
  93:Core/Src/at32f403a_407_board.c ****   * @retval none
  94:Core/Src/at32f403a_407_board.c ****   */
  95:Core/Src/at32f403a_407_board.c **** PUTCHAR_PROTOTYPE
  96:Core/Src/at32f403a_407_board.c **** {
  26              		.loc 1 96 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 10B5     		push	{r4, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 4, -8
  35              		.cfi_offset 14, -4
  36 0002 0446     		mov	r4, r0
  37              	.LVL1:
  38              	.L2:
  97:Core/Src/at32f403a_407_board.c ****   while(usart_flag_get(PRINT_UART, USART_TDBE_FLAG) == RESET);
  39              		.loc 1 97 0 discriminator 1
  40 0004 8021     		movs	r1, #128
  41 0006 0548     		ldr	r0, .L4
  42 0008 FFF7FEFF 		bl	usart_flag_get
  43              	.LVL2:
  44 000c 0028     		cmp	r0, #0
  45 000e F9D0     		beq	.L2
  98:Core/Src/at32f403a_407_board.c ****   usart_data_transmit(PRINT_UART, ch);
  46              		.loc 1 98 0
  47 0010 A1B2     		uxth	r1, r4
  48 0012 0248     		ldr	r0, .L4
  49 0014 FFF7FEFF 		bl	usart_data_transmit
  50              	.LVL3:
  99:Core/Src/at32f403a_407_board.c ****   return ch;
 100:Core/Src/at32f403a_407_board.c **** }
  51              		.loc 1 100 0
  52 0018 2046     		mov	r0, r4
  53 001a 10BD     		pop	{r4, pc}
  54              	.LVL4:
  55              	.L5:
  56              		.align	2
  57              	.L4:
  58 001c 00380140 		.word	1073821696
  59              		.cfi_endproc
  60              	.LFE134:
  62              		.section	.text.uart_print_init,"ax",%progbits
  63              		.align	1
  64              		.global	uart_print_init
  65              		.syntax unified
  66              		.thumb
  67              		.thumb_func
  68              		.fpu softvfp
  70              	uart_print_init:
  71              	.LFB135:
 101:Core/Src/at32f403a_407_board.c **** 
 102:Core/Src/at32f403a_407_board.c **** /**
 103:Core/Src/at32f403a_407_board.c ****   * @brief  initialize uart
ARM GAS  /tmp/ccZxRW0B.s 			page 4


 104:Core/Src/at32f403a_407_board.c ****   * @param  baudrate: uart baudrate
 105:Core/Src/at32f403a_407_board.c ****   * @retval none
 106:Core/Src/at32f403a_407_board.c ****   */
 107:Core/Src/at32f403a_407_board.c **** void uart_print_init(uint32_t baudrate)
 108:Core/Src/at32f403a_407_board.c **** {
  72              		.loc 1 108 0
  73              		.cfi_startproc
  74              		@ args = 0, pretend = 0, frame = 8
  75              		@ frame_needed = 0, uses_anonymous_args = 0
  76              	.LVL5:
  77 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  78              	.LCFI1:
  79              		.cfi_def_cfa_offset 20
  80              		.cfi_offset 4, -20
  81              		.cfi_offset 5, -16
  82              		.cfi_offset 6, -12
  83              		.cfi_offset 7, -8
  84              		.cfi_offset 14, -4
  85 0002 83B0     		sub	sp, sp, #12
  86              	.LCFI2:
  87              		.cfi_def_cfa_offset 32
  88 0004 0746     		mov	r7, r0
 109:Core/Src/at32f403a_407_board.c ****   gpio_init_type gpio_init_struct;
 110:Core/Src/at32f403a_407_board.c **** 
 111:Core/Src/at32f403a_407_board.c ****   /* enable the uart and gpio clock */
 112:Core/Src/at32f403a_407_board.c ****   crm_periph_clock_enable(PRINT_UART_CRM_CLK, TRUE);
  89              		.loc 1 112 0
  90 0006 0121     		movs	r1, #1
  91 0008 1648     		ldr	r0, .L8
  92              	.LVL6:
  93 000a FFF7FEFF 		bl	crm_periph_clock_enable
  94              	.LVL7:
 113:Core/Src/at32f403a_407_board.c ****   crm_periph_clock_enable(PRINT_UART_TX_GPIO_CRM_CLK, TRUE);
  95              		.loc 1 113 0
  96 000e 0121     		movs	r1, #1
  97 0010 1548     		ldr	r0, .L8+4
  98 0012 FFF7FEFF 		bl	crm_periph_clock_enable
  99              	.LVL8:
 114:Core/Src/at32f403a_407_board.c **** 
 115:Core/Src/at32f403a_407_board.c ****   gpio_default_para_init(&gpio_init_struct);
 100              		.loc 1 115 0
 101 0016 6846     		mov	r0, sp
 102 0018 FFF7FEFF 		bl	gpio_default_para_init
 103              	.LVL9:
 116:Core/Src/at32f403a_407_board.c **** 
 117:Core/Src/at32f403a_407_board.c ****   /* configure the uart tx pin */
 118:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_drive_strength = GPIO_DRIVE_STRENGTH_STRONGER;
 104              		.loc 1 118 0
 105 001c 0125     		movs	r5, #1
 106 001e 8DF80750 		strb	r5, [sp, #7]
 119:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_out_type  = GPIO_OUTPUT_PUSH_PULL;
 107              		.loc 1 119 0
 108 0022 0026     		movs	r6, #0
 109 0024 8DF80460 		strb	r6, [sp, #4]
 120:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_mode = GPIO_MODE_MUX;
 110              		.loc 1 120 0
 111 0028 0823     		movs	r3, #8
ARM GAS  /tmp/ccZxRW0B.s 			page 5


 112 002a 8DF80630 		strb	r3, [sp, #6]
 121:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_pins = GPIO_PINS_9;
 113              		.loc 1 121 0
 114 002e 4FF40073 		mov	r3, #512
 115 0032 0093     		str	r3, [sp]
 122:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_pull = GPIO_PULL_NONE;
 116              		.loc 1 122 0
 117 0034 0423     		movs	r3, #4
 118 0036 8DF80530 		strb	r3, [sp, #5]
 123:Core/Src/at32f403a_407_board.c ****   gpio_init(GPIOA, &gpio_init_struct);
 119              		.loc 1 123 0
 120 003a 6946     		mov	r1, sp
 121 003c 0B48     		ldr	r0, .L8+8
 122 003e FFF7FEFF 		bl	gpio_init
 123              	.LVL10:
 124:Core/Src/at32f403a_407_board.c **** 
 125:Core/Src/at32f403a_407_board.c ****   /* configure uart param */
 126:Core/Src/at32f403a_407_board.c ****   usart_init(USART1, baudrate, USART_DATA_8BITS, USART_STOP_1_BIT);
 124              		.loc 1 126 0
 125 0042 0B4C     		ldr	r4, .L8+12
 126 0044 3346     		mov	r3, r6
 127 0046 3246     		mov	r2, r6
 128 0048 3946     		mov	r1, r7
 129 004a 2046     		mov	r0, r4
 130 004c FFF7FEFF 		bl	usart_init
 131              	.LVL11:
 127:Core/Src/at32f403a_407_board.c ****   usart_transmitter_enable(USART1, TRUE);
 132              		.loc 1 127 0
 133 0050 2946     		mov	r1, r5
 134 0052 2046     		mov	r0, r4
 135 0054 FFF7FEFF 		bl	usart_transmitter_enable
 136              	.LVL12:
 128:Core/Src/at32f403a_407_board.c ****   usart_enable(USART1, TRUE);
 137              		.loc 1 128 0
 138 0058 2946     		mov	r1, r5
 139 005a 2046     		mov	r0, r4
 140 005c FFF7FEFF 		bl	usart_enable
 141              	.LVL13:
 129:Core/Src/at32f403a_407_board.c **** }
 142              		.loc 1 129 0
 143 0060 03B0     		add	sp, sp, #12
 144              	.LCFI3:
 145              		.cfi_def_cfa_offset 20
 146              		@ sp needed
 147 0062 F0BD     		pop	{r4, r5, r6, r7, pc}
 148              	.LVL14:
 149              	.L9:
 150              		.align	2
 151              	.L8:
 152 0064 0E001800 		.word	1572878
 153 0068 02001800 		.word	1572866
 154 006c 00080140 		.word	1073809408
 155 0070 00380140 		.word	1073821696
 156              		.cfi_endproc
 157              	.LFE135:
 159              		.section	.text.at32_button_init,"ax",%progbits
 160              		.align	1
ARM GAS  /tmp/ccZxRW0B.s 			page 6


 161              		.global	at32_button_init
 162              		.syntax unified
 163              		.thumb
 164              		.thumb_func
 165              		.fpu softvfp
 167              	at32_button_init:
 168              	.LFB137:
 130:Core/Src/at32f403a_407_board.c **** 
 131:Core/Src/at32f403a_407_board.c **** /**
 132:Core/Src/at32f403a_407_board.c ****   * @brief  board initialize interface init led and button
 133:Core/Src/at32f403a_407_board.c ****   * @param  none
 134:Core/Src/at32f403a_407_board.c ****   * @retval none
 135:Core/Src/at32f403a_407_board.c ****   */
 136:Core/Src/at32f403a_407_board.c **** void at32_board_init()
 137:Core/Src/at32f403a_407_board.c **** {
 138:Core/Src/at32f403a_407_board.c ****   /* initialize delay function */
 139:Core/Src/at32f403a_407_board.c ****   delay_init();
 140:Core/Src/at32f403a_407_board.c **** 
 141:Core/Src/at32f403a_407_board.c ****   /* configure led in at_start_board */
 142:Core/Src/at32f403a_407_board.c ****   // at32_led_init(LED2);
 143:Core/Src/at32f403a_407_board.c ****   // at32_led_init(LED3);
 144:Core/Src/at32f403a_407_board.c ****   // at32_led_init(LED4);
 145:Core/Src/at32f403a_407_board.c ****   // at32_led_off(LED2);
 146:Core/Src/at32f403a_407_board.c ****   // at32_led_off(LED3);
 147:Core/Src/at32f403a_407_board.c ****   // at32_led_off(LED4);
 148:Core/Src/at32f403a_407_board.c **** 
 149:Core/Src/at32f403a_407_board.c ****   /* configure button in at_start board */
 150:Core/Src/at32f403a_407_board.c ****   // at32_button_init();
 151:Core/Src/at32f403a_407_board.c **** }
 152:Core/Src/at32f403a_407_board.c **** 
 153:Core/Src/at32f403a_407_board.c **** /**
 154:Core/Src/at32f403a_407_board.c ****   * @brief  configure button gpio
 155:Core/Src/at32f403a_407_board.c ****   * @param  button: specifies the button to be configured.
 156:Core/Src/at32f403a_407_board.c ****   * @retval none
 157:Core/Src/at32f403a_407_board.c ****   */
 158:Core/Src/at32f403a_407_board.c **** void at32_button_init(void)
 159:Core/Src/at32f403a_407_board.c **** {
 169              		.loc 1 159 0
 170              		.cfi_startproc
 171              		@ args = 0, pretend = 0, frame = 8
 172              		@ frame_needed = 0, uses_anonymous_args = 0
 173 0000 00B5     		push	{lr}
 174              	.LCFI4:
 175              		.cfi_def_cfa_offset 4
 176              		.cfi_offset 14, -4
 177 0002 83B0     		sub	sp, sp, #12
 178              	.LCFI5:
 179              		.cfi_def_cfa_offset 16
 160:Core/Src/at32f403a_407_board.c ****   gpio_init_type gpio_init_struct;
 161:Core/Src/at32f403a_407_board.c **** 
 162:Core/Src/at32f403a_407_board.c ****   /* enable the button clock */
 163:Core/Src/at32f403a_407_board.c ****   crm_periph_clock_enable(USER_BUTTON_CRM_CLK, TRUE);
 180              		.loc 1 163 0
 181 0004 0121     		movs	r1, #1
 182 0006 0C48     		ldr	r0, .L12
 183 0008 FFF7FEFF 		bl	crm_periph_clock_enable
 184              	.LVL15:
ARM GAS  /tmp/ccZxRW0B.s 			page 7


 164:Core/Src/at32f403a_407_board.c **** 
 165:Core/Src/at32f403a_407_board.c ****   /* set default parameter */
 166:Core/Src/at32f403a_407_board.c ****   gpio_default_para_init(&gpio_init_struct);
 185              		.loc 1 166 0
 186 000c 6846     		mov	r0, sp
 187 000e FFF7FEFF 		bl	gpio_default_para_init
 188              	.LVL16:
 167:Core/Src/at32f403a_407_board.c **** 
 168:Core/Src/at32f403a_407_board.c ****   /* configure button pin as input with pull-up/pull-down */
 169:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_drive_strength = GPIO_DRIVE_STRENGTH_STRONGER;
 189              		.loc 1 169 0
 190 0012 0123     		movs	r3, #1
 191 0014 8DF80730 		strb	r3, [sp, #7]
 170:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_out_type  = GPIO_OUTPUT_PUSH_PULL;
 192              		.loc 1 170 0
 193 0018 0022     		movs	r2, #0
 194 001a 8DF80420 		strb	r2, [sp, #4]
 171:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_mode = GPIO_MODE_INPUT;
 195              		.loc 1 171 0
 196 001e 8DF80620 		strb	r2, [sp, #6]
 172:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_pins = USER_BUTTON_PIN;
 197              		.loc 1 172 0
 198 0022 0093     		str	r3, [sp]
 173:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_pull = GPIO_PULL_DOWN;
 199              		.loc 1 173 0
 200 0024 2823     		movs	r3, #40
 201 0026 8DF80530 		strb	r3, [sp, #5]
 174:Core/Src/at32f403a_407_board.c ****   gpio_init(USER_BUTTON_PORT, &gpio_init_struct);
 202              		.loc 1 174 0
 203 002a 6946     		mov	r1, sp
 204 002c 0348     		ldr	r0, .L12+4
 205 002e FFF7FEFF 		bl	gpio_init
 206              	.LVL17:
 175:Core/Src/at32f403a_407_board.c **** }
 207              		.loc 1 175 0
 208 0032 03B0     		add	sp, sp, #12
 209              	.LCFI6:
 210              		.cfi_def_cfa_offset 4
 211              		@ sp needed
 212 0034 5DF804FB 		ldr	pc, [sp], #4
 213              	.L13:
 214              		.align	2
 215              	.L12:
 216 0038 02001800 		.word	1572866
 217 003c 00080140 		.word	1073809408
 218              		.cfi_endproc
 219              	.LFE137:
 221              		.section	.text.at32_button_state,"ax",%progbits
 222              		.align	1
 223              		.global	at32_button_state
 224              		.syntax unified
 225              		.thumb
 226              		.thumb_func
 227              		.fpu softvfp
 229              	at32_button_state:
 230              	.LFB138:
 176:Core/Src/at32f403a_407_board.c **** 
ARM GAS  /tmp/ccZxRW0B.s 			page 8


 177:Core/Src/at32f403a_407_board.c **** /**
 178:Core/Src/at32f403a_407_board.c ****   * @brief  returns the selected button state
 179:Core/Src/at32f403a_407_board.c ****   * @param  none
 180:Core/Src/at32f403a_407_board.c ****   * @retval the button gpio pin value
 181:Core/Src/at32f403a_407_board.c ****   */
 182:Core/Src/at32f403a_407_board.c **** uint8_t at32_button_state(void)
 183:Core/Src/at32f403a_407_board.c **** {
 231              		.loc 1 183 0
 232              		.cfi_startproc
 233              		@ args = 0, pretend = 0, frame = 0
 234              		@ frame_needed = 0, uses_anonymous_args = 0
 235 0000 08B5     		push	{r3, lr}
 236              	.LCFI7:
 237              		.cfi_def_cfa_offset 8
 238              		.cfi_offset 3, -8
 239              		.cfi_offset 14, -4
 184:Core/Src/at32f403a_407_board.c ****   return gpio_input_data_bit_read(USER_BUTTON_PORT, USER_BUTTON_PIN);
 240              		.loc 1 184 0
 241 0002 0121     		movs	r1, #1
 242 0004 0148     		ldr	r0, .L16
 243 0006 FFF7FEFF 		bl	gpio_input_data_bit_read
 244              	.LVL18:
 185:Core/Src/at32f403a_407_board.c **** }
 245              		.loc 1 185 0
 246 000a 08BD     		pop	{r3, pc}
 247              	.L17:
 248              		.align	2
 249              	.L16:
 250 000c 00080140 		.word	1073809408
 251              		.cfi_endproc
 252              	.LFE138:
 254              		.section	.text.at32_led_init,"ax",%progbits
 255              		.align	1
 256              		.global	at32_led_init
 257              		.syntax unified
 258              		.thumb
 259              		.thumb_func
 260              		.fpu softvfp
 262              	at32_led_init:
 263              	.LFB140:
 186:Core/Src/at32f403a_407_board.c **** 
 187:Core/Src/at32f403a_407_board.c **** /**
 188:Core/Src/at32f403a_407_board.c ****   * @brief  returns which button have press down
 189:Core/Src/at32f403a_407_board.c ****   * @param  none
 190:Core/Src/at32f403a_407_board.c ****   * @retval the button have press down
 191:Core/Src/at32f403a_407_board.c ****   */
 192:Core/Src/at32f403a_407_board.c **** button_type at32_button_press()
 193:Core/Src/at32f403a_407_board.c **** {
 194:Core/Src/at32f403a_407_board.c ****   static uint8_t pressed = 1;
 195:Core/Src/at32f403a_407_board.c ****   /* get button state in at_start board */
 196:Core/Src/at32f403a_407_board.c ****   if((pressed == 1) && (at32_button_state() != RESET))
 197:Core/Src/at32f403a_407_board.c ****   {
 198:Core/Src/at32f403a_407_board.c ****     /* debounce */
 199:Core/Src/at32f403a_407_board.c ****     pressed = 0;
 200:Core/Src/at32f403a_407_board.c ****     delay_ms(10);
 201:Core/Src/at32f403a_407_board.c ****     if(at32_button_state() != RESET)
 202:Core/Src/at32f403a_407_board.c ****       return USER_BUTTON;
ARM GAS  /tmp/ccZxRW0B.s 			page 9


 203:Core/Src/at32f403a_407_board.c ****   }
 204:Core/Src/at32f403a_407_board.c ****   else if(at32_button_state() == RESET)
 205:Core/Src/at32f403a_407_board.c ****   {
 206:Core/Src/at32f403a_407_board.c ****     pressed = 1;
 207:Core/Src/at32f403a_407_board.c ****   }
 208:Core/Src/at32f403a_407_board.c ****   return NO_BUTTON;
 209:Core/Src/at32f403a_407_board.c **** }
 210:Core/Src/at32f403a_407_board.c **** 
 211:Core/Src/at32f403a_407_board.c **** /**
 212:Core/Src/at32f403a_407_board.c ****   * @brief  configure led gpio
 213:Core/Src/at32f403a_407_board.c ****   * @param  led: specifies the led to be configured.
 214:Core/Src/at32f403a_407_board.c ****   * @retval none
 215:Core/Src/at32f403a_407_board.c ****   */
 216:Core/Src/at32f403a_407_board.c **** void at32_led_init(led_type led)
 217:Core/Src/at32f403a_407_board.c **** {
 264              		.loc 1 217 0
 265              		.cfi_startproc
 266              		@ args = 0, pretend = 0, frame = 8
 267              		@ frame_needed = 0, uses_anonymous_args = 0
 268              	.LVL19:
 269 0000 10B5     		push	{r4, lr}
 270              	.LCFI8:
 271              		.cfi_def_cfa_offset 8
 272              		.cfi_offset 4, -8
 273              		.cfi_offset 14, -4
 274 0002 82B0     		sub	sp, sp, #8
 275              	.LCFI9:
 276              		.cfi_def_cfa_offset 16
 277 0004 0446     		mov	r4, r0
 218:Core/Src/at32f403a_407_board.c ****   gpio_init_type gpio_init_struct;
 219:Core/Src/at32f403a_407_board.c **** 
 220:Core/Src/at32f403a_407_board.c ****   /* enable the led clock */
 221:Core/Src/at32f403a_407_board.c ****   crm_periph_clock_enable(led_gpio_crm_clk[led], TRUE);
 278              		.loc 1 221 0
 279 0006 0121     		movs	r1, #1
 280 0008 0F4B     		ldr	r3, .L20
 281 000a 53F82000 		ldr	r0, [r3, r0, lsl #2]
 282              	.LVL20:
 283 000e FFF7FEFF 		bl	crm_periph_clock_enable
 284              	.LVL21:
 222:Core/Src/at32f403a_407_board.c **** 
 223:Core/Src/at32f403a_407_board.c ****   /* set default parameter */
 224:Core/Src/at32f403a_407_board.c ****   gpio_default_para_init(&gpio_init_struct);
 285              		.loc 1 224 0
 286 0012 6846     		mov	r0, sp
 287 0014 FFF7FEFF 		bl	gpio_default_para_init
 288              	.LVL22:
 225:Core/Src/at32f403a_407_board.c **** 
 226:Core/Src/at32f403a_407_board.c ****   /* configure the led gpio */
 227:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_drive_strength = GPIO_DRIVE_STRENGTH_STRONGER;
 289              		.loc 1 227 0
 290 0018 0123     		movs	r3, #1
 291 001a 8DF80730 		strb	r3, [sp, #7]
 228:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_out_type  = GPIO_OUTPUT_PUSH_PULL;
 292              		.loc 1 228 0
 293 001e 0023     		movs	r3, #0
 294 0020 8DF80430 		strb	r3, [sp, #4]
ARM GAS  /tmp/ccZxRW0B.s 			page 10


 229:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_mode = GPIO_MODE_OUTPUT;
 295              		.loc 1 229 0
 296 0024 1023     		movs	r3, #16
 297 0026 8DF80630 		strb	r3, [sp, #6]
 230:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_pins = led_gpio_pin[led];
 298              		.loc 1 230 0
 299 002a 084B     		ldr	r3, .L20+4
 300 002c 33F81430 		ldrh	r3, [r3, r4, lsl #1]
 301 0030 0093     		str	r3, [sp]
 231:Core/Src/at32f403a_407_board.c ****   gpio_init_struct.gpio_pull = GPIO_PULL_NONE;
 302              		.loc 1 231 0
 303 0032 0423     		movs	r3, #4
 304 0034 8DF80530 		strb	r3, [sp, #5]
 232:Core/Src/at32f403a_407_board.c ****   gpio_init(led_gpio_port[led], &gpio_init_struct);
 305              		.loc 1 232 0
 306 0038 6946     		mov	r1, sp
 307 003a 054B     		ldr	r3, .L20+8
 308 003c 53F82400 		ldr	r0, [r3, r4, lsl #2]
 309 0040 FFF7FEFF 		bl	gpio_init
 310              	.LVL23:
 233:Core/Src/at32f403a_407_board.c **** }
 311              		.loc 1 233 0
 312 0044 02B0     		add	sp, sp, #8
 313              	.LCFI10:
 314              		.cfi_def_cfa_offset 8
 315              		@ sp needed
 316 0046 10BD     		pop	{r4, pc}
 317              	.L21:
 318              		.align	2
 319              	.L20:
 320 0048 00000000 		.word	.LANCHOR0
 321 004c 00000000 		.word	.LANCHOR1
 322 0050 00000000 		.word	.LANCHOR2
 323              		.cfi_endproc
 324              	.LFE140:
 326              		.section	.text.at32_led_on,"ax",%progbits
 327              		.align	1
 328              		.global	at32_led_on
 329              		.syntax unified
 330              		.thumb
 331              		.thumb_func
 332              		.fpu softvfp
 334              	at32_led_on:
 335              	.LFB141:
 234:Core/Src/at32f403a_407_board.c **** 
 235:Core/Src/at32f403a_407_board.c **** /**
 236:Core/Src/at32f403a_407_board.c ****   * @brief  turns selected led on.
 237:Core/Src/at32f403a_407_board.c ****   * @param  led: specifies the led to be set on.
 238:Core/Src/at32f403a_407_board.c ****   *   this parameter can be one of following parameters:
 239:Core/Src/at32f403a_407_board.c ****   *     @arg LED2
 240:Core/Src/at32f403a_407_board.c ****   *     @arg LED3
 241:Core/Src/at32f403a_407_board.c ****   *     @arg LED4
 242:Core/Src/at32f403a_407_board.c ****   * @retval none
 243:Core/Src/at32f403a_407_board.c ****   */
 244:Core/Src/at32f403a_407_board.c **** void at32_led_on(led_type led)
 245:Core/Src/at32f403a_407_board.c **** {
 336              		.loc 1 245 0
ARM GAS  /tmp/ccZxRW0B.s 			page 11


 337              		.cfi_startproc
 338              		@ args = 0, pretend = 0, frame = 0
 339              		@ frame_needed = 0, uses_anonymous_args = 0
 340              		@ link register save eliminated.
 341              	.LVL24:
 246:Core/Src/at32f403a_407_board.c ****   if(led > (LED_NUM - 1))
 342              		.loc 1 246 0
 343 0000 0228     		cmp	r0, #2
 344 0002 07D8     		bhi	.L22
 247:Core/Src/at32f403a_407_board.c ****     return;
 248:Core/Src/at32f403a_407_board.c ****   if(led_gpio_pin[led])
 345              		.loc 1 248 0
 346 0004 044B     		ldr	r3, .L24
 347 0006 33F81030 		ldrh	r3, [r3, r0, lsl #1]
 348 000a 1BB1     		cbz	r3, .L22
 249:Core/Src/at32f403a_407_board.c ****     led_gpio_port[led]->clr = led_gpio_pin[led];
 349              		.loc 1 249 0
 350 000c 034A     		ldr	r2, .L24+4
 351 000e 52F82020 		ldr	r2, [r2, r0, lsl #2]
 352 0012 5361     		str	r3, [r2, #20]
 353              	.L22:
 354 0014 7047     		bx	lr
 355              	.L25:
 356 0016 00BF     		.align	2
 357              	.L24:
 358 0018 00000000 		.word	.LANCHOR1
 359 001c 00000000 		.word	.LANCHOR2
 360              		.cfi_endproc
 361              	.LFE141:
 363              		.section	.text.at32_led_off,"ax",%progbits
 364              		.align	1
 365              		.global	at32_led_off
 366              		.syntax unified
 367              		.thumb
 368              		.thumb_func
 369              		.fpu softvfp
 371              	at32_led_off:
 372              	.LFB142:
 250:Core/Src/at32f403a_407_board.c **** }
 251:Core/Src/at32f403a_407_board.c **** 
 252:Core/Src/at32f403a_407_board.c **** /**
 253:Core/Src/at32f403a_407_board.c ****   * @brief  turns selected led off.
 254:Core/Src/at32f403a_407_board.c ****   * @param  led: specifies the led to be set off.
 255:Core/Src/at32f403a_407_board.c ****   *   this parameter can be one of following parameters:
 256:Core/Src/at32f403a_407_board.c ****   *     @arg LED2
 257:Core/Src/at32f403a_407_board.c ****   *     @arg LED3
 258:Core/Src/at32f403a_407_board.c ****   *     @arg LED4
 259:Core/Src/at32f403a_407_board.c ****   * @retval none
 260:Core/Src/at32f403a_407_board.c ****   */
 261:Core/Src/at32f403a_407_board.c **** void at32_led_off(led_type led)
 262:Core/Src/at32f403a_407_board.c **** {
 373              		.loc 1 262 0
 374              		.cfi_startproc
 375              		@ args = 0, pretend = 0, frame = 0
 376              		@ frame_needed = 0, uses_anonymous_args = 0
 377              		@ link register save eliminated.
 378              	.LVL25:
ARM GAS  /tmp/ccZxRW0B.s 			page 12


 263:Core/Src/at32f403a_407_board.c ****   if(led > (LED_NUM - 1))
 379              		.loc 1 263 0
 380 0000 0228     		cmp	r0, #2
 381 0002 07D8     		bhi	.L26
 264:Core/Src/at32f403a_407_board.c ****     return;
 265:Core/Src/at32f403a_407_board.c ****   if(led_gpio_pin[led])
 382              		.loc 1 265 0
 383 0004 044B     		ldr	r3, .L28
 384 0006 33F81030 		ldrh	r3, [r3, r0, lsl #1]
 385 000a 1BB1     		cbz	r3, .L26
 266:Core/Src/at32f403a_407_board.c ****     led_gpio_port[led]->scr = led_gpio_pin[led];
 386              		.loc 1 266 0
 387 000c 034A     		ldr	r2, .L28+4
 388 000e 52F82020 		ldr	r2, [r2, r0, lsl #2]
 389 0012 1361     		str	r3, [r2, #16]
 390              	.L26:
 391 0014 7047     		bx	lr
 392              	.L29:
 393 0016 00BF     		.align	2
 394              	.L28:
 395 0018 00000000 		.word	.LANCHOR1
 396 001c 00000000 		.word	.LANCHOR2
 397              		.cfi_endproc
 398              	.LFE142:
 400              		.section	.text.at32_led_toggle,"ax",%progbits
 401              		.align	1
 402              		.global	at32_led_toggle
 403              		.syntax unified
 404              		.thumb
 405              		.thumb_func
 406              		.fpu softvfp
 408              	at32_led_toggle:
 409              	.LFB143:
 267:Core/Src/at32f403a_407_board.c **** }
 268:Core/Src/at32f403a_407_board.c **** 
 269:Core/Src/at32f403a_407_board.c **** /**
 270:Core/Src/at32f403a_407_board.c ****   * @brief  turns selected led tooggle.
 271:Core/Src/at32f403a_407_board.c ****   * @param  led: specifies the led to be set off.
 272:Core/Src/at32f403a_407_board.c ****   *   this parameter can be one of following parameters:
 273:Core/Src/at32f403a_407_board.c ****   *     @arg LED2
 274:Core/Src/at32f403a_407_board.c ****   *     @arg LED3
 275:Core/Src/at32f403a_407_board.c ****   *     @arg LED4
 276:Core/Src/at32f403a_407_board.c ****   * @retval none
 277:Core/Src/at32f403a_407_board.c ****   */
 278:Core/Src/at32f403a_407_board.c **** void at32_led_toggle(led_type led)
 279:Core/Src/at32f403a_407_board.c **** {
 410              		.loc 1 279 0
 411              		.cfi_startproc
 412              		@ args = 0, pretend = 0, frame = 0
 413              		@ frame_needed = 0, uses_anonymous_args = 0
 414              		@ link register save eliminated.
 415              	.LVL26:
 280:Core/Src/at32f403a_407_board.c ****   if(led > (LED_NUM - 1))
 416              		.loc 1 280 0
 417 0000 0228     		cmp	r0, #2
 418 0002 09D8     		bhi	.L30
 281:Core/Src/at32f403a_407_board.c ****     return;
ARM GAS  /tmp/ccZxRW0B.s 			page 13


 282:Core/Src/at32f403a_407_board.c ****   if(led_gpio_pin[led])
 419              		.loc 1 282 0
 420 0004 054B     		ldr	r3, .L32
 421 0006 33F81030 		ldrh	r3, [r3, r0, lsl #1]
 422 000a 2BB1     		cbz	r3, .L30
 283:Core/Src/at32f403a_407_board.c ****     led_gpio_port[led]->odt ^= led_gpio_pin[led];
 423              		.loc 1 283 0
 424 000c 044A     		ldr	r2, .L32+4
 425 000e 52F82010 		ldr	r1, [r2, r0, lsl #2]
 426 0012 CA68     		ldr	r2, [r1, #12]
 427 0014 5340     		eors	r3, r3, r2
 428 0016 CB60     		str	r3, [r1, #12]
 429              	.L30:
 430 0018 7047     		bx	lr
 431              	.L33:
 432 001a 00BF     		.align	2
 433              	.L32:
 434 001c 00000000 		.word	.LANCHOR1
 435 0020 00000000 		.word	.LANCHOR2
 436              		.cfi_endproc
 437              	.LFE143:
 439              		.section	.text.delay_init,"ax",%progbits
 440              		.align	1
 441              		.global	delay_init
 442              		.syntax unified
 443              		.thumb
 444              		.thumb_func
 445              		.fpu softvfp
 447              	delay_init:
 448              	.LFB144:
 284:Core/Src/at32f403a_407_board.c **** }
 285:Core/Src/at32f403a_407_board.c **** 
 286:Core/Src/at32f403a_407_board.c **** /**
 287:Core/Src/at32f403a_407_board.c ****   * @brief  initialize delay function
 288:Core/Src/at32f403a_407_board.c ****   * @param  none
 289:Core/Src/at32f403a_407_board.c ****   * @retval none
 290:Core/Src/at32f403a_407_board.c ****   */
 291:Core/Src/at32f403a_407_board.c **** void delay_init()
 292:Core/Src/at32f403a_407_board.c **** {
 449              		.loc 1 292 0
 450              		.cfi_startproc
 451              		@ args = 0, pretend = 0, frame = 0
 452              		@ frame_needed = 0, uses_anonymous_args = 0
 453 0000 08B5     		push	{r3, lr}
 454              	.LCFI11:
 455              		.cfi_def_cfa_offset 8
 456              		.cfi_offset 3, -8
 457              		.cfi_offset 14, -4
 293:Core/Src/at32f403a_407_board.c ****   /* configure systick */
 294:Core/Src/at32f403a_407_board.c ****   systick_clock_source_config(SYSTICK_CLOCK_SOURCE_AHBCLK_NODIV);
 458              		.loc 1 294 0
 459 0002 0420     		movs	r0, #4
 460 0004 FFF7FEFF 		bl	systick_clock_source_config
 461              	.LVL27:
 295:Core/Src/at32f403a_407_board.c ****   fac_us = system_core_clock / (1000000U);
 462              		.loc 1 295 0
 463 0008 074B     		ldr	r3, .L36
ARM GAS  /tmp/ccZxRW0B.s 			page 14


 464 000a 1B68     		ldr	r3, [r3]
 465 000c 074A     		ldr	r2, .L36+4
 466 000e A2FB0323 		umull	r2, r3, r2, r3
 467 0012 9B0C     		lsrs	r3, r3, #18
 468 0014 064A     		ldr	r2, .L36+8
 469 0016 1360     		str	r3, [r2]
 296:Core/Src/at32f403a_407_board.c ****   fac_ms = fac_us * (1000U);
 470              		.loc 1 296 0
 471 0018 1268     		ldr	r2, [r2]
 472 001a 4FF47A73 		mov	r3, #1000
 473 001e 03FB02F3 		mul	r3, r3, r2
 474 0022 044A     		ldr	r2, .L36+12
 475 0024 1360     		str	r3, [r2]
 476 0026 08BD     		pop	{r3, pc}
 477              	.L37:
 478              		.align	2
 479              	.L36:
 480 0028 00000000 		.word	system_core_clock
 481 002c 83DE1B43 		.word	1125899907
 482 0030 00000000 		.word	.LANCHOR3
 483 0034 00000000 		.word	.LANCHOR4
 484              		.cfi_endproc
 485              	.LFE144:
 487              		.section	.text.at32_board_init,"ax",%progbits
 488              		.align	1
 489              		.global	at32_board_init
 490              		.syntax unified
 491              		.thumb
 492              		.thumb_func
 493              		.fpu softvfp
 495              	at32_board_init:
 496              	.LFB136:
 137:Core/Src/at32f403a_407_board.c ****   /* initialize delay function */
 497              		.loc 1 137 0
 498              		.cfi_startproc
 499              		@ args = 0, pretend = 0, frame = 0
 500              		@ frame_needed = 0, uses_anonymous_args = 0
 501 0000 08B5     		push	{r3, lr}
 502              	.LCFI12:
 503              		.cfi_def_cfa_offset 8
 504              		.cfi_offset 3, -8
 505              		.cfi_offset 14, -4
 139:Core/Src/at32f403a_407_board.c **** 
 506              		.loc 1 139 0
 507 0002 FFF7FEFF 		bl	delay_init
 508              	.LVL28:
 509 0006 08BD     		pop	{r3, pc}
 510              		.cfi_endproc
 511              	.LFE136:
 513              		.section	.text.delay_us,"ax",%progbits
 514              		.align	1
 515              		.global	delay_us
 516              		.syntax unified
 517              		.thumb
 518              		.thumb_func
 519              		.fpu softvfp
 521              	delay_us:
ARM GAS  /tmp/ccZxRW0B.s 			page 15


 522              	.LFB145:
 297:Core/Src/at32f403a_407_board.c **** }
 298:Core/Src/at32f403a_407_board.c **** 
 299:Core/Src/at32f403a_407_board.c **** /**
 300:Core/Src/at32f403a_407_board.c ****   * @brief  inserts a delay time.
 301:Core/Src/at32f403a_407_board.c ****   * @param  nus: specifies the delay time length, in microsecond.
 302:Core/Src/at32f403a_407_board.c ****   * @retval none
 303:Core/Src/at32f403a_407_board.c ****   */
 304:Core/Src/at32f403a_407_board.c **** void delay_us(uint32_t nus)
 305:Core/Src/at32f403a_407_board.c **** {
 523              		.loc 1 305 0
 524              		.cfi_startproc
 525              		@ args = 0, pretend = 0, frame = 0
 526              		@ frame_needed = 0, uses_anonymous_args = 0
 527              		@ link register save eliminated.
 528              	.LVL29:
 306:Core/Src/at32f403a_407_board.c ****   uint32_t temp = 0;
 307:Core/Src/at32f403a_407_board.c ****   SysTick->LOAD = (uint32_t)(nus * fac_us);
 529              		.loc 1 307 0
 530 0000 0C4B     		ldr	r3, .L42
 531 0002 1B68     		ldr	r3, [r3]
 532 0004 00FB03F0 		mul	r0, r0, r3
 533              	.LVL30:
 534 0008 0B4B     		ldr	r3, .L42+4
 535 000a 5860     		str	r0, [r3, #4]
 308:Core/Src/at32f403a_407_board.c ****   SysTick->VAL = 0x00;
 536              		.loc 1 308 0
 537 000c 0022     		movs	r2, #0
 538 000e 9A60     		str	r2, [r3, #8]
 309:Core/Src/at32f403a_407_board.c ****   SysTick->CTRL |= SysTick_CTRL_ENABLE_Msk ;
 539              		.loc 1 309 0
 540 0010 1A68     		ldr	r2, [r3]
 541 0012 42F00102 		orr	r2, r2, #1
 542 0016 1A60     		str	r2, [r3]
 543              	.LVL31:
 544              	.L41:
 310:Core/Src/at32f403a_407_board.c ****   do
 311:Core/Src/at32f403a_407_board.c ****   {
 312:Core/Src/at32f403a_407_board.c ****     temp = SysTick->CTRL;
 545              		.loc 1 312 0 discriminator 1
 546 0018 074B     		ldr	r3, .L42+4
 547 001a 1B68     		ldr	r3, [r3]
 548              	.LVL32:
 313:Core/Src/at32f403a_407_board.c ****   }while((temp & 0x01) && !(temp & (1 << 16)));
 549              		.loc 1 313 0 discriminator 1
 550 001c 03F00113 		and	r3, r3, #65537
 551              	.LVL33:
 552 0020 012B     		cmp	r3, #1
 553 0022 F9D0     		beq	.L41
 314:Core/Src/at32f403a_407_board.c **** 
 315:Core/Src/at32f403a_407_board.c ****   SysTick->CTRL &= ~SysTick_CTRL_ENABLE_Msk;
 554              		.loc 1 315 0
 555 0024 044B     		ldr	r3, .L42+4
 556 0026 1A68     		ldr	r2, [r3]
 557 0028 22F00102 		bic	r2, r2, #1
 558 002c 1A60     		str	r2, [r3]
 316:Core/Src/at32f403a_407_board.c ****   SysTick->VAL = 0x00;
ARM GAS  /tmp/ccZxRW0B.s 			page 16


 559              		.loc 1 316 0
 560 002e 0022     		movs	r2, #0
 561 0030 9A60     		str	r2, [r3, #8]
 562 0032 7047     		bx	lr
 563              	.L43:
 564              		.align	2
 565              	.L42:
 566 0034 00000000 		.word	.LANCHOR3
 567 0038 10E000E0 		.word	-536813552
 568              		.cfi_endproc
 569              	.LFE145:
 571              		.section	.text.delay_ms,"ax",%progbits
 572              		.align	1
 573              		.global	delay_ms
 574              		.syntax unified
 575              		.thumb
 576              		.thumb_func
 577              		.fpu softvfp
 579              	delay_ms:
 580              	.LFB146:
 317:Core/Src/at32f403a_407_board.c **** }
 318:Core/Src/at32f403a_407_board.c **** 
 319:Core/Src/at32f403a_407_board.c **** /**
 320:Core/Src/at32f403a_407_board.c ****   * @brief  inserts a delay time.
 321:Core/Src/at32f403a_407_board.c ****   * @param  nms: specifies the delay time length, in milliseconds.
 322:Core/Src/at32f403a_407_board.c ****   * @retval none
 323:Core/Src/at32f403a_407_board.c ****   */
 324:Core/Src/at32f403a_407_board.c **** void delay_ms(uint16_t nms)
 325:Core/Src/at32f403a_407_board.c **** {
 581              		.loc 1 325 0
 582              		.cfi_startproc
 583              		@ args = 0, pretend = 0, frame = 0
 584              		@ frame_needed = 0, uses_anonymous_args = 0
 585              		@ link register save eliminated.
 586              	.LVL34:
 326:Core/Src/at32f403a_407_board.c ****   uint32_t temp = 0;
 327:Core/Src/at32f403a_407_board.c ****   while(nms)
 587              		.loc 1 327 0
 588 0000 1AE0     		b	.L45
 589              	.LVL35:
 590              	.L46:
 328:Core/Src/at32f403a_407_board.c ****   {
 329:Core/Src/at32f403a_407_board.c ****     if(nms > STEP_DELAY_MS)
 330:Core/Src/at32f403a_407_board.c ****     {
 331:Core/Src/at32f403a_407_board.c ****       SysTick->LOAD = (uint32_t)(STEP_DELAY_MS * fac_ms);
 332:Core/Src/at32f403a_407_board.c ****       nms -= STEP_DELAY_MS;
 333:Core/Src/at32f403a_407_board.c ****     }
 334:Core/Src/at32f403a_407_board.c ****     else
 335:Core/Src/at32f403a_407_board.c ****     {
 336:Core/Src/at32f403a_407_board.c ****       SysTick->LOAD = (uint32_t)(nms * fac_ms);
 591              		.loc 1 336 0
 592 0002 144B     		ldr	r3, .L51
 593 0004 1B68     		ldr	r3, [r3]
 594 0006 03FB00F0 		mul	r0, r3, r0
 595              	.LVL36:
 596 000a 134B     		ldr	r3, .L51+4
 597 000c 5860     		str	r0, [r3, #4]
ARM GAS  /tmp/ccZxRW0B.s 			page 17


 598              	.LVL37:
 337:Core/Src/at32f403a_407_board.c ****       nms = 0;
 599              		.loc 1 337 0
 600 000e 0020     		movs	r0, #0
 601              	.LVL38:
 602              	.L47:
 338:Core/Src/at32f403a_407_board.c ****     }
 339:Core/Src/at32f403a_407_board.c ****     SysTick->VAL = 0x00;
 603              		.loc 1 339 0
 604 0010 114B     		ldr	r3, .L51+4
 605 0012 0022     		movs	r2, #0
 606 0014 9A60     		str	r2, [r3, #8]
 340:Core/Src/at32f403a_407_board.c ****     SysTick->CTRL |= SysTick_CTRL_ENABLE_Msk;
 607              		.loc 1 340 0
 608 0016 1A68     		ldr	r2, [r3]
 609 0018 42F00102 		orr	r2, r2, #1
 610 001c 1A60     		str	r2, [r3]
 611              	.L48:
 341:Core/Src/at32f403a_407_board.c ****     do
 342:Core/Src/at32f403a_407_board.c ****     {
 343:Core/Src/at32f403a_407_board.c ****       temp = SysTick->CTRL;
 612              		.loc 1 343 0 discriminator 1
 613 001e 0E4B     		ldr	r3, .L51+4
 614 0020 1B68     		ldr	r3, [r3]
 615              	.LVL39:
 344:Core/Src/at32f403a_407_board.c ****     }while((temp & 0x01) && !(temp & (1 << 16)));
 616              		.loc 1 344 0 discriminator 1
 617 0022 03F00113 		and	r3, r3, #65537
 618              	.LVL40:
 619 0026 012B     		cmp	r3, #1
 620 0028 F9D0     		beq	.L48
 345:Core/Src/at32f403a_407_board.c **** 
 346:Core/Src/at32f403a_407_board.c ****     SysTick->CTRL &= ~SysTick_CTRL_ENABLE_Msk;
 621              		.loc 1 346 0
 622 002a 0B4B     		ldr	r3, .L51+4
 623 002c 1A68     		ldr	r2, [r3]
 624 002e 22F00102 		bic	r2, r2, #1
 625 0032 1A60     		str	r2, [r3]
 347:Core/Src/at32f403a_407_board.c ****     SysTick->VAL = 0x00;
 626              		.loc 1 347 0
 627 0034 0022     		movs	r2, #0
 628 0036 9A60     		str	r2, [r3, #8]
 629              	.L45:
 327:Core/Src/at32f403a_407_board.c ****   {
 630              		.loc 1 327 0
 631 0038 58B1     		cbz	r0, .L50
 329:Core/Src/at32f403a_407_board.c ****     {
 632              		.loc 1 329 0
 633 003a 3228     		cmp	r0, #50
 634 003c E1D9     		bls	.L46
 331:Core/Src/at32f403a_407_board.c ****       nms -= STEP_DELAY_MS;
 635              		.loc 1 331 0
 636 003e 054B     		ldr	r3, .L51
 637 0040 1A68     		ldr	r2, [r3]
 638 0042 3223     		movs	r3, #50
 639 0044 03FB02F3 		mul	r3, r3, r2
 640 0048 034A     		ldr	r2, .L51+4
ARM GAS  /tmp/ccZxRW0B.s 			page 18


 641 004a 5360     		str	r3, [r2, #4]
 332:Core/Src/at32f403a_407_board.c ****     }
 642              		.loc 1 332 0
 643 004c 3238     		subs	r0, r0, #50
 644              	.LVL41:
 645 004e 80B2     		uxth	r0, r0
 646              	.LVL42:
 647 0050 DEE7     		b	.L47
 648              	.L50:
 348:Core/Src/at32f403a_407_board.c ****   }
 349:Core/Src/at32f403a_407_board.c **** }
 649              		.loc 1 349 0
 650 0052 7047     		bx	lr
 651              	.L52:
 652              		.align	2
 653              	.L51:
 654 0054 00000000 		.word	.LANCHOR4
 655 0058 10E000E0 		.word	-536813552
 656              		.cfi_endproc
 657              	.LFE146:
 659              		.section	.text.at32_button_press,"ax",%progbits
 660              		.align	1
 661              		.global	at32_button_press
 662              		.syntax unified
 663              		.thumb
 664              		.thumb_func
 665              		.fpu softvfp
 667              	at32_button_press:
 668              	.LFB139:
 193:Core/Src/at32f403a_407_board.c ****   static uint8_t pressed = 1;
 669              		.loc 1 193 0
 670              		.cfi_startproc
 671              		@ args = 0, pretend = 0, frame = 0
 672              		@ frame_needed = 0, uses_anonymous_args = 0
 673 0000 08B5     		push	{r3, lr}
 674              	.LCFI13:
 675              		.cfi_def_cfa_offset 8
 676              		.cfi_offset 3, -8
 677              		.cfi_offset 14, -4
 196:Core/Src/at32f403a_407_board.c ****   {
 678              		.loc 1 196 0
 679 0002 0F4B     		ldr	r3, .L60
 680 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 681 0006 012B     		cmp	r3, #1
 682 0008 06D0     		beq	.L59
 683              	.L54:
 204:Core/Src/at32f403a_407_board.c ****   {
 684              		.loc 1 204 0
 685 000a FFF7FEFF 		bl	at32_button_state
 686              	.LVL43:
 687 000e A0B9     		cbnz	r0, .L57
 206:Core/Src/at32f403a_407_board.c ****   }
 688              		.loc 1 206 0
 689 0010 0120     		movs	r0, #1
 690 0012 0B4B     		ldr	r3, .L60
 691 0014 1870     		strb	r0, [r3]
 692 0016 08BD     		pop	{r3, pc}
ARM GAS  /tmp/ccZxRW0B.s 			page 19


 693              	.L59:
 196:Core/Src/at32f403a_407_board.c ****   {
 694              		.loc 1 196 0 discriminator 1
 695 0018 FFF7FEFF 		bl	at32_button_state
 696              	.LVL44:
 697 001c 0028     		cmp	r0, #0
 698 001e F4D0     		beq	.L54
 199:Core/Src/at32f403a_407_board.c ****     delay_ms(10);
 699              		.loc 1 199 0
 700 0020 0022     		movs	r2, #0
 701 0022 074B     		ldr	r3, .L60
 702 0024 1A70     		strb	r2, [r3]
 200:Core/Src/at32f403a_407_board.c ****     if(at32_button_state() != RESET)
 703              		.loc 1 200 0
 704 0026 0A20     		movs	r0, #10
 705 0028 FFF7FEFF 		bl	delay_ms
 706              	.LVL45:
 201:Core/Src/at32f403a_407_board.c ****       return USER_BUTTON;
 707              		.loc 1 201 0
 708 002c FFF7FEFF 		bl	at32_button_state
 709              	.LVL46:
 710 0030 08B1     		cbz	r0, .L56
 202:Core/Src/at32f403a_407_board.c ****   }
 711              		.loc 1 202 0
 712 0032 0020     		movs	r0, #0
 713 0034 08BD     		pop	{r3, pc}
 714              	.L56:
 208:Core/Src/at32f403a_407_board.c **** }
 715              		.loc 1 208 0
 716 0036 0120     		movs	r0, #1
 717 0038 08BD     		pop	{r3, pc}
 718              	.L57:
 719 003a 0120     		movs	r0, #1
 209:Core/Src/at32f403a_407_board.c **** 
 720              		.loc 1 209 0
 721 003c 08BD     		pop	{r3, pc}
 722              	.L61:
 723 003e 00BF     		.align	2
 724              	.L60:
 725 0040 00000000 		.word	.LANCHOR5
 726              		.cfi_endproc
 727              	.LFE139:
 729              		.section	.text.delay_sec,"ax",%progbits
 730              		.align	1
 731              		.global	delay_sec
 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
 735              		.fpu softvfp
 737              	delay_sec:
 738              	.LFB147:
 350:Core/Src/at32f403a_407_board.c **** 
 351:Core/Src/at32f403a_407_board.c **** /**
 352:Core/Src/at32f403a_407_board.c ****   * @brief  inserts a delay time.
 353:Core/Src/at32f403a_407_board.c ****   * @param  sec: specifies the delay time, in seconds.
 354:Core/Src/at32f403a_407_board.c ****   * @retval none
 355:Core/Src/at32f403a_407_board.c ****   */
ARM GAS  /tmp/ccZxRW0B.s 			page 20


 356:Core/Src/at32f403a_407_board.c **** void delay_sec(uint16_t sec)
 357:Core/Src/at32f403a_407_board.c **** {
 739              		.loc 1 357 0
 740              		.cfi_startproc
 741              		@ args = 0, pretend = 0, frame = 0
 742              		@ frame_needed = 0, uses_anonymous_args = 0
 743              	.LVL47:
 744 0000 38B5     		push	{r3, r4, r5, lr}
 745              	.LCFI14:
 746              		.cfi_def_cfa_offset 16
 747              		.cfi_offset 3, -16
 748              		.cfi_offset 4, -12
 749              		.cfi_offset 5, -8
 750              		.cfi_offset 14, -4
 751 0002 0546     		mov	r5, r0
 752              	.LVL48:
 358:Core/Src/at32f403a_407_board.c ****   uint16_t index;
 359:Core/Src/at32f403a_407_board.c ****   for(index = 0; index < sec; index++)
 753              		.loc 1 359 0
 754 0004 0024     		movs	r4, #0
 755 0006 09E0     		b	.L63
 756              	.LVL49:
 757              	.L64:
 360:Core/Src/at32f403a_407_board.c ****   {
 361:Core/Src/at32f403a_407_board.c ****     delay_ms(500);
 758              		.loc 1 361 0 discriminator 3
 759 0008 4FF4FA70 		mov	r0, #500
 760 000c FFF7FEFF 		bl	delay_ms
 761              	.LVL50:
 362:Core/Src/at32f403a_407_board.c ****     delay_ms(500);
 762              		.loc 1 362 0 discriminator 3
 763 0010 4FF4FA70 		mov	r0, #500
 764 0014 FFF7FEFF 		bl	delay_ms
 765              	.LVL51:
 359:Core/Src/at32f403a_407_board.c ****   {
 766              		.loc 1 359 0 discriminator 3
 767 0018 0134     		adds	r4, r4, #1
 768              	.LVL52:
 769 001a A4B2     		uxth	r4, r4
 770              	.LVL53:
 771              	.L63:
 359:Core/Src/at32f403a_407_board.c ****   {
 772              		.loc 1 359 0 is_stmt 0 discriminator 1
 773 001c AC42     		cmp	r4, r5
 774 001e F3D3     		bcc	.L64
 363:Core/Src/at32f403a_407_board.c ****   }
 364:Core/Src/at32f403a_407_board.c **** }
 775              		.loc 1 364 0 is_stmt 1
 776 0020 38BD     		pop	{r3, r4, r5, pc}
 777              		.cfi_endproc
 778              	.LFE147:
 780              		.global	led_gpio_crm_clk
 781              		.global	led_gpio_pin
 782              		.global	led_gpio_port
 783              		.section	.bss.fac_ms,"aw",%nobits
 784              		.align	2
 785              		.set	.LANCHOR4,. + 0
ARM GAS  /tmp/ccZxRW0B.s 			page 21


 788              	fac_ms:
 789 0000 00000000 		.space	4
 790              		.section	.bss.fac_us,"aw",%nobits
 791              		.align	2
 792              		.set	.LANCHOR3,. + 0
 795              	fac_us:
 796 0000 00000000 		.space	4
 797              		.section	.data.led_gpio_crm_clk,"aw",%progbits
 798              		.align	2
 799              		.set	.LANCHOR0,. + 0
 802              	led_gpio_crm_clk:
 803 0000 05001800 		.word	1572869
 804 0004 05001800 		.word	1572869
 805 0008 05001800 		.word	1572869
 806              		.section	.data.led_gpio_pin,"aw",%progbits
 807              		.align	2
 808              		.set	.LANCHOR1,. + 0
 811              	led_gpio_pin:
 812 0000 0020     		.short	8192
 813 0002 0040     		.short	16384
 814 0004 0080     		.short	-32768
 815              		.section	.data.led_gpio_port,"aw",%progbits
 816              		.align	2
 817              		.set	.LANCHOR2,. + 0
 820              	led_gpio_port:
 821 0000 00140140 		.word	1073812480
 822 0004 00140140 		.word	1073812480
 823 0008 00140140 		.word	1073812480
 824              		.section	.data.pressed.13699,"aw",%progbits
 825              		.set	.LANCHOR5,. + 0
 828              	pressed.13699:
 829 0000 01       		.byte	1
 830              		.text
 831              	.Letext0:
 832              		.file 2 "/home/y/github/EmbeddedSoftwareMCU/Tools/gcc-arm-none-eabi-unix/arm-none-eabi/include/mac
 833              		.file 3 "/home/y/github/EmbeddedSoftwareMCU/Tools/gcc-arm-none-eabi-unix/arm-none-eabi/include/sys
 834              		.file 4 "/home/y/github/EmbeddedSoftwareMCU/Tools/gcc-arm-none-eabi-unix/arm-none-eabi/include/sys
 835              		.file 5 "/home/y/github/EmbeddedSoftwareMCU/Tools/gcc-arm-none-eabi-unix/lib/gcc/arm-none-eabi/6.2
 836              		.file 6 "/home/y/github/EmbeddedSoftwareMCU/Tools/gcc-arm-none-eabi-unix/arm-none-eabi/include/sys
 837              		.file 7 "/home/y/github/EmbeddedSoftwareMCU/Tools/gcc-arm-none-eabi-unix/arm-none-eabi/include/sys
 838              		.file 8 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/cmsis/cm4/core_support/core_cm4.h"
 839              		.file 9 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/cmsis/cm4/device_support/system_at32f40
 840              		.file 10 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/cmsis/cm4/device_support/at32f403a_407
 841              		.file 11 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/drivers/inc/at32f403a_407_crm.h"
 842              		.file 12 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/drivers/inc/at32f403a_407_tmr.h"
 843              		.file 13 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/drivers/inc/at32f403a_407_gpio.h"
 844              		.file 14 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/drivers/inc/at32f403a_407_usart.h"
 845              		.file 15 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/drivers/inc/at32f403a_407_misc.h"
 846              		.file 16 "/home/y/github/EmbeddedSoftwareMCU/Libraries/AT32/drivers/inc/at32f403a_407_usb.h"
 847              		.file 17 "Core/Inc/at32f403a_407_board.h"
ARM GAS  /tmp/ccZxRW0B.s 			page 22


DEFINED SYMBOLS
                            *ABS*:0000000000000000 at32f403a_407_board.c
     /tmp/ccZxRW0B.s:16     .text.__io_putchar:0000000000000000 $t
     /tmp/ccZxRW0B.s:23     .text.__io_putchar:0000000000000000 __io_putchar
     /tmp/ccZxRW0B.s:58     .text.__io_putchar:000000000000001c $d
     /tmp/ccZxRW0B.s:63     .text.uart_print_init:0000000000000000 $t
     /tmp/ccZxRW0B.s:70     .text.uart_print_init:0000000000000000 uart_print_init
     /tmp/ccZxRW0B.s:152    .text.uart_print_init:0000000000000064 $d
     /tmp/ccZxRW0B.s:160    .text.at32_button_init:0000000000000000 $t
     /tmp/ccZxRW0B.s:167    .text.at32_button_init:0000000000000000 at32_button_init
     /tmp/ccZxRW0B.s:216    .text.at32_button_init:0000000000000038 $d
     /tmp/ccZxRW0B.s:222    .text.at32_button_state:0000000000000000 $t
     /tmp/ccZxRW0B.s:229    .text.at32_button_state:0000000000000000 at32_button_state
     /tmp/ccZxRW0B.s:250    .text.at32_button_state:000000000000000c $d
     /tmp/ccZxRW0B.s:255    .text.at32_led_init:0000000000000000 $t
     /tmp/ccZxRW0B.s:262    .text.at32_led_init:0000000000000000 at32_led_init
     /tmp/ccZxRW0B.s:320    .text.at32_led_init:0000000000000048 $d
     /tmp/ccZxRW0B.s:327    .text.at32_led_on:0000000000000000 $t
     /tmp/ccZxRW0B.s:334    .text.at32_led_on:0000000000000000 at32_led_on
     /tmp/ccZxRW0B.s:358    .text.at32_led_on:0000000000000018 $d
     /tmp/ccZxRW0B.s:364    .text.at32_led_off:0000000000000000 $t
     /tmp/ccZxRW0B.s:371    .text.at32_led_off:0000000000000000 at32_led_off
     /tmp/ccZxRW0B.s:395    .text.at32_led_off:0000000000000018 $d
     /tmp/ccZxRW0B.s:401    .text.at32_led_toggle:0000000000000000 $t
     /tmp/ccZxRW0B.s:408    .text.at32_led_toggle:0000000000000000 at32_led_toggle
     /tmp/ccZxRW0B.s:434    .text.at32_led_toggle:000000000000001c $d
     /tmp/ccZxRW0B.s:440    .text.delay_init:0000000000000000 $t
     /tmp/ccZxRW0B.s:447    .text.delay_init:0000000000000000 delay_init
     /tmp/ccZxRW0B.s:480    .text.delay_init:0000000000000028 $d
     /tmp/ccZxRW0B.s:488    .text.at32_board_init:0000000000000000 $t
     /tmp/ccZxRW0B.s:495    .text.at32_board_init:0000000000000000 at32_board_init
     /tmp/ccZxRW0B.s:514    .text.delay_us:0000000000000000 $t
     /tmp/ccZxRW0B.s:521    .text.delay_us:0000000000000000 delay_us
     /tmp/ccZxRW0B.s:566    .text.delay_us:0000000000000034 $d
     /tmp/ccZxRW0B.s:572    .text.delay_ms:0000000000000000 $t
     /tmp/ccZxRW0B.s:579    .text.delay_ms:0000000000000000 delay_ms
     /tmp/ccZxRW0B.s:654    .text.delay_ms:0000000000000054 $d
     /tmp/ccZxRW0B.s:660    .text.at32_button_press:0000000000000000 $t
     /tmp/ccZxRW0B.s:667    .text.at32_button_press:0000000000000000 at32_button_press
     /tmp/ccZxRW0B.s:725    .text.at32_button_press:0000000000000040 $d
     /tmp/ccZxRW0B.s:730    .text.delay_sec:0000000000000000 $t
     /tmp/ccZxRW0B.s:737    .text.delay_sec:0000000000000000 delay_sec
     /tmp/ccZxRW0B.s:802    .data.led_gpio_crm_clk:0000000000000000 led_gpio_crm_clk
     /tmp/ccZxRW0B.s:811    .data.led_gpio_pin:0000000000000000 led_gpio_pin
     /tmp/ccZxRW0B.s:820    .data.led_gpio_port:0000000000000000 led_gpio_port
     /tmp/ccZxRW0B.s:784    .bss.fac_ms:0000000000000000 $d
     /tmp/ccZxRW0B.s:788    .bss.fac_ms:0000000000000000 fac_ms
     /tmp/ccZxRW0B.s:791    .bss.fac_us:0000000000000000 $d
     /tmp/ccZxRW0B.s:795    .bss.fac_us:0000000000000000 fac_us
     /tmp/ccZxRW0B.s:798    .data.led_gpio_crm_clk:0000000000000000 $d
     /tmp/ccZxRW0B.s:807    .data.led_gpio_pin:0000000000000000 $d
     /tmp/ccZxRW0B.s:816    .data.led_gpio_port:0000000000000000 $d
     /tmp/ccZxRW0B.s:828    .data.pressed.13699:0000000000000000 pressed.13699
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
usart_flag_get
ARM GAS  /tmp/ccZxRW0B.s 			page 23


usart_data_transmit
crm_periph_clock_enable
gpio_default_para_init
gpio_init
usart_init
usart_transmitter_enable
usart_enable
gpio_input_data_bit_read
systick_clock_source_config
system_core_clock
